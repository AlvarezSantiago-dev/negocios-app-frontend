<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Gu√≠a de Usuario PDF</title>
  </head>
  <body>
    <button id="downloadBtn" style="padding: 10px 20px; font-size: 16px">
      üì• Descargar Gu√≠a en PDF
    </button>

    <!-- jsPDF y AutoTable desde CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

    <script>
      const { jsPDF } = window.jspdf;
      const autoTable = window.jspdfAutoTable;

      function generarPDFGuia() {
        const doc = new jsPDF();
        const fecha = new Date();
        doc.setFontSize(16);
        doc.text("üìò Gu√≠a de Usuario - Sistema de Gesti√≥n", 14, 20);
        doc.setFontSize(10);
        doc.text(
          `Generado el ${fecha.toLocaleDateString(
            "es-AR"
          )} a las ${fecha.toLocaleTimeString("es-AR")}`,
          180,
          20,
          { align: "right" }
        );

        let y = 30;

        // Array de secciones
        const secciones = [
          {
            titulo: "üåü 1. Dashboard Principal",
            contenido: "Resumen general del d√≠a y accesos r√°pidos.",
          },
          {
            titulo: "üîπ 1.1 Bienvenida",
            contenido: "Saludo personalizado y fecha actual.",
          },
          {
            titulo: "üîπ 1.2 KPIs del D√≠a",
            contenido: "Vendido hoy, Ganancia hoy, Ventas hoy, Stock cr√≠tico.",
          },
          {
            titulo: "üíº 2. P√°gina de Caja",
            contenido: "Gesti√≥n de apertura, cierre y movimientos.",
          },
          {
            titulo: "üü¢ 3. Apertura de Caja",
            contenido: "Ingresar montos iniciales y abrir caja.",
          },
          {
            titulo: "üî¥ 4. Cierre de Caja",
            contenido: "Registrar montos finales y generar cierre.",
          },
          {
            titulo: "‚úç 5. Movimientos",
            contenido: "Crear o editar ingresos y egresos manuales.",
          },
        ];

        secciones.forEach((sec) => {
          doc.setFontSize(14);
          doc.setTextColor(53, 121, 166);
          doc.text(sec.titulo, 14, y);
          y += 6;
          doc.setDrawColor(53, 121, 166);
          doc.line(14, y, 196, y);
          y += 10;

          autoTable(doc, {
            startY: y,
            body: [[sec.contenido]],
            theme: "grid",
            styles: { fontSize: 10, cellPadding: 2, halign: "left" },
            tableWidth: 180,
          });

          y = doc.lastAutoTable.finalY + 10;
          if (y > 270) {
            doc.addPage();
            y = 20;
          }
        });

        doc.setFontSize(10);
        doc.text("Sistema de Gesti√≥n ‚Äî Gu√≠a Autom√°tica", 105, 287, {
          align: "center",
        });
        doc.save("Guia_Usuario_Sistema.pdf");
      }

      document
        .getElementById("downloadBtn")
        .addEventListener("click", generarPDFGuia);
    </script>
  </body>
</html>
